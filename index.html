<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js - The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>CSAW-Quals 2015</h1>
				</section>

				<section>
          <h1>Forensics 100</h1>
					<h2>Keep Calm and CTF</h2>
				</section>

        <section>
          <img data-src="img/KCACTF.jpg">
        </section>

				<section data-markdown>
            <script type="text/template">
            ``` bash
                $ strings ./img.jpg | less

                JFIF
                XExif
                h1d1ng_in_4lm0st_pla1n_sigh7
                $3br
                %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz
                #3R
                &'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz
                #N%%
                ]<5)}
                xdF_
                MYUnb_
            ```
            </script>
				</section>

				<section>
          <h1>Forensics 100</h1>
					<h2>Flash</h2>
				</section>

				<section data-markdown>
            <script type="text/template">
            ``` bash
                $ file flash.img
                flash.img: DOS/MBR boot sector

                $ ls -al flash.img
                -rw-rw-r-- 1 fred fred 128M Sep 18 23:53 flash.img

                $ strings flash.img | wc -w
                9872470
            ```

            * Fichier de 128M
            * Contient presque 10 millions de mots...
            * Il faut raffiner la recherche
            </script>
        </section>

				<section data-markdown>
            <script type="text/template">
            ### On connaît le format du flag


            ``` bash
                $ strings flash.img | egrep flag{\\w*}
                flag{b3l0w_th3_r4dar}
            ```
            </script>
				</section>


				<section>
          <h1>Forensics 100</h1>
					<h2>Transfer</h2>
				</section>

				<section data-markdown>
            <script type="text/template">
            * Capture réseau (.pcap)
            * Wireshark est notre ami
            * Protocole HTTP: Reddit, Google, Facebook, Twitter...
            * Pourquoi pas faire une recherche avec flag ?
            * FollowTCPStream !!!
            </script>
        </section>

				<section data-markdown>
            <script type="text/template">
            ## Script de la capture réseau
            
            ``` python
            FLAG = 'flag{xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx}'
            enc_ciphers = ['rot13', 'b64e', 'caesar']
            # dec_ciphers = ['rot13', 'b64d', 'caesard']
            
            def encode(pt, cnt=50):
                tmp = '2{}'.format(b64encode(pt))
                for cnt in xrange(cnt):
                    c = random.choice(enc_ciphers)
                    i = enc_ciphers.index(c) + 1
                    _tmp = globals()[c](tmp)
                    tmp = '{}{}'.format(i, _tmp)

                return tmp

            if __name__ == '__main__':
                print encode(FLAG, cnt=?)
            ```
            </script>
        </section>


				<section data-markdown>
            <script type="text/template">
            ## Fonction pour décoder le flag
            
            ``` python
            def decode(flag):
                while flag[0] in ['1', '2', '3']:
                    c = dec_ciphers[int(flag[0]) - 1]
                    flag = globals()[c](flag[1:])
                    
                return flag

            ```
            ```
            $ python ./decode_flag.py 
            flag{li0ns_and_tig3rs_4nd_b34rs_0h_mi}
            ```

            </script>
        </section>

				<section>
          <h1>Reverse 300</h1>
					<h2>FTP</h2>
				</section>

				<section data-markdown>
            <script type="text/template">
            ## À quoi on a affaire
            ```
            $ file ./ftp
            ./ftp: ELF 64-bit LSB executable...dynamically linked...stripped
            ```

            ```
            $ nc localhost 12012
            Welcome to FTP server

            HELP
            USER PASS PASV PORT
            NOOP REIN LIST SYST SIZE
            RETR STOR PWD CWD

            USER fred
            Please send password for user fred

            PASS fred
            Invalid login credentials
            ```


            * Binaire GNU/Linux 64-bits
            * Serveur FTP qui écoute sur le port 12012
            * Objectif : S'authentifier

            </script>
        </section>

				<section data-markdown>
            <script type="text/template">
            ## Ce dont on a besoin

            * Désassembleur et débogueur (radare2, gdb, IDA, etc.)
            * Il faut communiquer par TCP (netcat)
            * Idéalement, un minimum de compréhension de l'assembleur

            </script>
        </section>
        
				<section data-markdown>
            <script type="text/template">
            ## Reverse engineering

            * L'utilisateur est hardcodé (blankwall)

            ```
            # Fonction de validation du mot de passe
            key = 5381
            for c in password:
                key = password[i] + key * 33

            if key == 3548828169:
                print "[*] Logged in"
            ```
            </script>
        </section>

				<section data-markdown>
            <script type="text/template">
            ## Reverse engineering

            * Fonction inverse pour retrouver le mot de passe

            ``` python
            result_key = 5381
            key = 3548828169
            password = ""

            while key != result_key:
              for c in string.printable:
                  if ((key - ord(c)) % 33) == 0:
                      password += c
                      key -= ord(c)
                      key /= 33
                      break

            print password
            ```
            * Aucun résultats...
            * Backtracking (à 4h a.m. ...)
            </script>
        </section>

				<section data-markdown>
            <script type="text/template">
            ## Reverse engineering

            * Pas plus de résultats
            * Retour dans le binaire
            ``` nasm
            cmp     eax, 3548828169
            ```
            * Comparaison sur 32-bits 
            * Integer overflow !
            * Si les 32-bits de poids faible == 0x0D386D209 ça passe !

            </script>
        </section>

				<section data-markdown>
            <script type="text/template">
            ## Reverse engineering

            * Notre mot de passe : "Tje737"
            * Le 'f' est filtré dans le path du fichier à télécharger
            * Il y a une commande secrète (pas dévoilée par HELP) : RDF
            * RDF nous envoie le flag

            </script>



				<section>
					<h2>Pretty Code</h2>
					<pre><code data-trim contenteditable>
function linkify( selector ) {
  if( supports3DTransforms ) {

    var nodes = document.querySelectorAll( selector );

    for( var i = 0, len = nodes.length; i &lt; len; i++ ) {
      var node = nodes[i];

      if( !node.className ) {
        node.className += ' roll';
      }
    }
  }
}
					</code></pre>
					<p>Code syntax highlighting courtesy of <a href="http://softwaremaniacs.org/soft/highlight/en/description/">highlight.js</a>.</p>
				</section>

				<section>
					<h2>Marvelous List</h2>
					<ul>
						<li>No order here</li>
						<li>Or here</li>
						<li>Or here</li>
						<li>Or here</li>
					</ul>
				</section>

				<section>
					<h2>Fantastic Ordered List</h2>
					<ol>
						<li>One is smaller than...</li>
						<li>Two is smaller than...</li>
						<li>Three!</li>
					</ol>
				</section>

				<section>
					<h2>Tabular Tables</h2>
					<table>
						<thead>
							<tr>
								<th>Item</th>
								<th>Value</th>
								<th>Quantity</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Apples</td>
								<td>$1</td>
								<td>7</td>
							<tr>
							<tr>
								<td>Lemonade</td>
								<td>$2</td>
								<td>18</td>
							<tr>
							<tr>
								<td>Bread</td>
								<td>$3</td>
								<td>2</td>
							<tr>
						</tbody>
					</table>
				</section>

				<section>
					<h2>Clever Quotes</h2>
					<p>
						These guys come in two forms, inline: <q cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;The nice thing about standards is that there are so many to choose from&rdquo;</q> and block:
					</p>
					<blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;For years there has been a theory that millions of monkeys typing at random on millions of typewriters would
						reproduce the entire works of Shakespeare. The Internet has proven this theory to be untrue.&rdquo;
					</blockquote>
				</section>

				<section>
					<h2>Intergalactic Interconnections</h2>
					<p>
						You can link between slides internally,
						<a href="#/2/3">like this</a>.
					</p>
				</section>

				<section>
					<h2>Speaker View</h2>
					<p>There's a <a href="https://github.com/hakimel/reveal.js#speaker-notes">speaker view</a>. It includes a timer, preview of the upcoming slide as well as your speaker notes.</p>
					<p>Press the <em>S</em> key to try it out.</p>

					<aside class="notes">
						Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
					</aside>
				</section>

				<section>
					<h2>Export to PDF</h2>
					<p>Presentations can be <a href="https://github.com/hakimel/reveal.js#pdf-export">exported to PDF</a>, here's an example:</p>
					<iframe src="//www.slideshare.net/slideshow/embed_code/42840540" width="445" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:3px solid #666; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>
				</section>

				<section>
					<h2>Global State</h2>
					<p>
						Set <code>data-state="something"</code> on a slide and <code>"something"</code>
						will be added as a class to the document element when the slide is open. This lets you
						apply broader style changes, like switching the page background.
					</p>
				</section>

				<section data-state="customevent">
					<h2>State Events</h2>
					<p>
						Additionally custom events can be triggered on a per slide basis by binding to the <code>data-state</code> name.
					</p>
					<pre><code class="javascript" data-trim contenteditable style="font-size: 18px;">
Reveal.addEventListener( 'customevent', function() {
	console.log( '"customevent" has fired' );
} );
					</code></pre>
				</section>

				<section>
					<h2>Take a Moment</h2>
					<p>
						Press B or . on your keyboard to pause the presentation. This is helpful when you're on stage and want to take distracting slides off the screen.
					</p>
				</section>

				<section>
					<h2>Much more</h2>
					<ul>
						<li>Right-to-left support</li>
						<li><a href="https://github.com/hakimel/reveal.js#api">Extensive JavaScript API</a></li>
						<li><a href="https://github.com/hakimel/reveal.js#auto-sliding">Auto-progression</a></li>
						<li><a href="https://github.com/hakimel/reveal.js#parallax-background">Parallax backgrounds</a></li>
						<li><a href="https://github.com/hakimel/reveal.js#keyboard-bindings">Custom keyboard bindings</a></li>
					</ul>
				</section>

				<section style="text-align: left;">
					<h1>THE END</h1>
					<p>
						- <a href="http://slides.com">Try the online editor</a> <br>
						- <a href="https://github.com/hakimel/reveal.js">Source code &amp; documentation</a>
					</p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
